{% extends 'base.html' %} {% load i18n %}{% load static %} {% block title %}{{ auction.fish.name }}{% trans " Auction" %}{% endblock %} {%
block content %}
<h1>{{ auction.fish.name }}{% trans " Auction" %}</h1>
<p>{{ auction.description }}</p>
{% if auction.image %}
<img src="{{ auction.image.url }}" alt="{{ auction.fish.name }}" class="auction-image" />
{% endif %}
<p>{% trans "Starting bid:" %} {{ auction.starting_bid }} USD</p>
<p>{% trans "Auction ends:" %} {{ auction.end_time }}</p>
<p>{% trans "Owner:" %} {{ auction.creator.username }}</p>

<p>{% trans "Size:" %} {{ auction.size_cm }} cm</p>
<p>{% trans "Weight:" %} {{ auction.weight_kg }} kg</p>

{% if winner %}
<p>{% trans "Current highest bidder:" %} {{ winner.username }}</p>
{% else %}
<p>{% trans "No bids yet" %}</p>
{% endif %} {% if auction.is_ended %}
<p>{% trans "Auction has ended." %}</p>
{% if winner %}
<p>{% trans "Winner:" %} {{ winner.username }}</p>
{% endif %} {% endif %} {% if request.user == auction.creator %}
<h2>{% trans "Manage Listing" %}</h2>
{% if not auction.is_ended %}
<form action="{% url 'auction:end_auction' auction.id %}" method="post">
  {% csrf_token %}
  <button type="submit" class="btn btn-warning">{% trans "End Auction Early" %}</button>
</form>
{% endif %}
<form action="{% url 'auction:delete_auction' auction.id %}" method="post">
  {% csrf_token %}
  <button type="submit" class="btn btn-danger">{% trans "Delete Auction" %}</button>
</form>
{% endif %} {% if request.user.is_superuser or request.user.userprofile.user_type == 'admin' %}
<h2>{% trans "Admin Actions" %}</h2>
<form action="{% url 'auction:delete_auction' auction.id %}" method="post">
  {% csrf_token %}
  <button type="submit" class="btn btn-danger">{% trans "Delete Auction" %}</button>
</form>
{% endif %}

<h2>{% trans "Bids" %}</h2>
<ul>
  {% for bid in auction.bid_set.all %}
  <li>{{ bid.bidder.username }} - {{ bid.amount }} USD</li>
  {% endfor %}
</ul>

{% if not auction.is_ended and request.user.userprofile.user_type != 'seller' %}
<h2>{% trans "Place a bid" %}</h2>
<form action="{% url 'auction:place_bid' auction.id %}" method="post">
  {% csrf_token %} {{ form.as_p }}
  <button type="submit">{% trans "Place Bid" %}</button>
</form>
{% endif %} {% endblock %}
